# Отчет по лабораторной работе "HTTP аутентификация"

## Цель работы:
Спроектировать и разработать систему авторизации пользователей на протоколе HTTP.

## Ход работы
### Пользовательский интерфейс

###### Диаграма работы программы
Диагамма представлена в файле **diagram.jpg**

<image src="diagram.jpg">

---

При входе на сайт пользователь попадает на страницу ***/login.php***, которая является заглавной страницей сайта. Где находится форма авторизации
###### 1. **login.php**
Страница с формой авторизации. Если у пользователя нет аккаунта, то он может нажать на кнопку зарегестрироваться и произойдет редирект на страницу ***/registration.php***. При клике на кнопку "Submit" выполняется скрипт ***auth.php***.
###### 2. **registration.php**
Страница с формой регистрации. Если у пользователя есть аккаунт, то он может нажать на кнопку войти и произойдет редирект на страницу ***/login.php***. При клике на кнопку "Submit" выполняется скрипт ***check.php***.
###### 3. **auth.php**
Скрипт, который подключается к базе данных и берет оттуда строку с логином введенным пользователем в форме. Если такого пользователя в базе данных не найдено то выводится соответствующая ошибка. Затем с помощью функции `password_verify($_POST['pass'], $row['pass'])` пароль проверяется на соответствие с хешем пароля, хранящимся в базе данных, если проверка пройдена успешно, то пользователь получает COOKIE и попадает на страницу ***/user.html*** если проверка не пройдена то редирект на страницу ***no_user.hml***
###### 4. **check.php**
Скрипт, в который записываются значения введенные пользователем в форме в соответствующие переменные. Выполняется проверка на корректность ввода логина и пароля, а так же на равенство пароля и подтверждения пароля, если проверки не пройдены выводится соответствующая ошибка. Затем при подключении к базе данных ищется строка с логином, который ввел пользователь в форме регистрации, если такая строка нашлась то пользовутелю выводится ошибка `Пользователь с таким логином уже зарегистрирован`. Затем с помощью функции `password_hash($pass, PASSWORD_DEFAULT)` пароль хешируется по алгоритму `PASSWORD_DEFAULT`. Дальше в соответствующие значения в базе данных записывается *id* пользователя *login* и *password hashed*. При успешной регистрации пользователь получает COOKIE и попадает на страницу ***/user.php***.
###### 5. **user.php**
Страница, выводящая имя авторизированного пользователя и кнопку выхода. При клике на которую происходит редирект на страницу ***exit.php***
###### 6. **exit.php**
Скрипт, который удаляет COOKIE у пользователя

### База данных
#### lab_1
| id | login | pass |

В этой таблице:

- **id** - уникальный идентификатор пользователя (int);

- **login** - имя пользователя (varchar(100));

- **pass** - хэш пароля (varchar(60));

### Вывод
Спроектировал и разработал простейшую систему авторизации пользователей на протоколе HTTP.
# SignToken
